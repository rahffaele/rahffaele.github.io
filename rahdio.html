<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.js"></script>

</head>
<body id="bg">
  <div id="night-filter"></div>
  <div id="view-switch" onclick="changeView();">
  <img src="../rahdio/assets/generic-icons/eye-open.svg" id="eye-icon">
  <button id="changeViewBtn">Complete view</button>
</div>
  <script src="change-view.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.min.js"></script>
  <script src="https://unpkg.com/tone@^14.8.26"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.14.0/maps/maps-web.min.js"></script>

  <link rel="stylesheet" type="text/css" href="rahdio.css">

  <div class="container" id="top-content">
    <div class="column col-3">
      <img src="../rahdio/assets/rahdio-logo.svg" id="rahdio-logo">
    </div>
    <div class="column col-4">
      <h3 class="menu"><a href="../index.html" target="_blank">by Rahffaele</a></h3>
    </div>
    <div class="column col-4">
      <h3 class="menu"><a href="" target="_blank">About this project</a></h3>
    </div>
  </div>
  
  <div class="container">
    <div class="column col-4">
      <div class="widget">
        <h1 id="cityTitle" style="display: inline;">Milan</h1>
        <img src="../rahdio/assets/weather-icons/cloud-sun.svg" style="display: inline; vertical-align: baseline ;" id="weather-icon">
        <p id="tempText"></p>
        <p id="humidity"></p>
        <p id="windText"></p>
      </div>

      <div class="widget transparent">
        <h3>Now playing</h3>
        <h2 id="songTitle"></h2>
        <span id="dateTimeSpan"></span>
        <label for="citySelect" >Select a city:</label>
        <div id="player">
          <select id="citySelect">
            <option value="Milan">Milan</option>
            <option value="New York">New York</option>
            <option value="Paris">Paris</option>
            <option value="Rome">Rome</option>
            <option value="London">London</option>
            <option value="Berlin">Berlin</option>
            <option value="São Paulo">São Paulo</option>
            <option value="Palermo">Palermo</option>
          </select>
          <script>
          const citySelect = document.getElementById('citySelect');
          citySelect.addEventListener('change', function() {
            if (citySelect.value !== '') {
              musicStart();
            }
          });
          </script>
          <button onclick="musicStart(); getTime()" id="startStop"><img id="player-icon"src="../rahdio/assets/music-icons/play.svg"></button>
        </div>
      </div>
    </div>

    <div class="column col-4">
      <div class="widget invisible widg-map" class="complete-view-widg" id="traffic-widget">
        <h3 style="padding-left: 16px;">Traffic heatmap</h3>
        <iframe width='100%' height='300px' src="https://api.mapbox.com/styles/v1/raffamietta/clisxtlz6004801qygx350wpw/draft.html?title=false&access_token=pk.eyJ1IjoicmFmZmFtaWV0dGEiLCJhIjoiY2tvOHNzNHRsMGF6dTJwcW00NWpyZjV3aSJ9.U9556Jd38UOT_R4q6gzNTQ&zoomwheel=false#10/45.466/9.186" title="traffic heatmap" style="border:none; border-radius:16px; margin-top: 16px" id="traffic-map"></iframe>
      </div> 
      <div class="widget air-widget" id="air-widget" class="complete-view-widg">
        <h3>Air quality</h3>
        <h1 id="airQualText" class="inline">46</h1>
        <span class="inline">US AQI</span>
        <p style="color: white" id="airWidgetDescription"></p>
      </div>     
    </div>
    <div class="column col-12"></div>
    <div class="column col-4" style="margin-bottom: 80px;">
      <div class="widget transparent">
        <h2 style="margin-bottom: 32px">Master</h2>
        <label for="trebleSlider">Treble volume</label>
        <input type="range" id="trebleSlider" class="slider" min="-200" max="-20" value="-35" step="1">
        <label for="harmonySlider">Middle volume</label>
        <input type="range" id="harmonySlider" class="slider" min="-200" max="0" value="-25" step="1">
        <label for="bassSlider">Bass volume</label>
        <input type="range" id="bassSlider" class="slider" min="-200" max="-20" value="-25" step="1">
        <hr>
        <label for="delayEffect">Delay effect</label>
        <input type="range" id="delayEffect" class="slider" min="0.2" max="1" value="1" step="0.1">
      </div>
      <div class="widget transparent">
        <h2>Tracks</h2>
        <p>Ambient noise tracks are avaiable only accorndigly to the weather of the selected city.</p><br>
          <button onclick="" class="disabled-button" id="rain-track">Soothing rain</button>
          <audio id="rain-track-file" src="./rahdio/assets/tracks/rain-track.mp3"></audio>

          <button onclick="" class="disabled-button" id="traffic-track">Traffic noise</button>

          <button onclick="" class="disabled-button" id="birds-track">Chirping birds</button>
          <audio id="birds-track-file" src="./rahdio/assets/tracks/bird-track.mp3"></audio>

          <button onclick="" class="disabled-button" id="thunder-track">Thunderstorm</button>
          <audio id="thunderstorm-track-file" src="./rahdio/assets/tracks/thunderstorm-track.mp3"></audio>
      </div>
      <div class="widget invisible" id="caption-widg">
        <h2>How does it work?</h2>
        
        <p style="color: white; opacity: 60%; font-size: 16px;">The website's goal is to transform real-time data from global cities into musical compositions.<br>By incorporating data such as weather conditions, crowd levels, and air quality, the website converts these inputs into a unique musical experience, providing an innovative and immersive way to perceive and interact with urban data.</p>
        <button onclick="" class="general-button" style="margin: 24px 0 0 0">More details</button>
      </div>
    </div>
  </div>
 <script src="ambient-music.js"></script>
</body>
</html>